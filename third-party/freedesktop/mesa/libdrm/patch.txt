diff -aur -x configure -x aclocal.m4 -x Makefile.in libdrm-2.4.79-orig/configure.ac libdrm-2.4.79/configure.ac
--- libdrm-2.4.79-orig/configure.ac	2017-04-08 23:00:58.000000000 +0300
+++ libdrm-2.4.79/configure.ac	2017-04-12 19:11:22.417172609 +0300
@@ -68,7 +68,7 @@
     pthread_stubs_possible="no"
     ;;
 * )
-    pthread_stubs_possible="yes"
+    pthread_stubs_possible="no"
     ;;
 esac
 
diff -aur -x configure -x aclocal.m4 -x Makefile.in libdrm-2.4.79-orig/include/drm/drm.h libdrm-2.4.79/include/drm/drm.h
--- libdrm-2.4.79-orig/include/drm/drm.h	2017-04-08 23:00:58.000000000 +0300
+++ libdrm-2.4.79/include/drm/drm.h	2017-04-12 19:38:10.441146376 +0300
@@ -40,8 +40,17 @@
 
 #include <linux/types.h>
 #include <asm/ioctl.h>
+
 typedef unsigned int drm_handle_t;
 
+#elif defined(__EMBOX__)
+
+#include <linux/types.h>
+#include <sys/ioctl.h>
+
+typedef size_t   __kernel_size_t;
+typedef unsigned long drm_handle_t;
+
 #else /* One of the BSDs */
 
 #include <sys/ioccom.h>
diff -aur -x configure -x aclocal.m4 -x Makefile.in libdrm-2.4.79-orig/xf86drm.h libdrm-2.4.79/xf86drm.h
--- libdrm-2.4.79-orig/xf86drm.h	2017-04-08 23:00:58.000000000 +0300
+++ libdrm-2.4.79/xf86drm.h	2017-04-12 19:38:16.353175687 +0300
@@ -47,7 +47,16 @@
 #define DRM_MAX_MINOR   16
 #endif
 
-#if defined(__linux__)
+#if defined(__linux__) 
+
+#define DRM_IOCTL_NR(n)		_IOC_NR(n)
+#define DRM_IOC_VOID		_IOC_NONE
+#define DRM_IOC_READ		_IOC_READ
+#define DRM_IOC_WRITE		_IOC_WRITE
+#define DRM_IOC_READWRITE	_IOC_READ|_IOC_WRITE
+#define DRM_IOC(dir, group, nr, size) _IOC(dir, group, nr, size)
+
+#elif defined(__EMBOX__)
 
 #define DRM_IOCTL_NR(n)		_IOC_NR(n)
 #define DRM_IOC_VOID		_IOC_NONE
